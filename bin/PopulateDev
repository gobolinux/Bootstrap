#!/bin/sh

#
# Populates /System/Kernel/Devices with a few important devices
#
# Author: Lucas Correia Villa Real <lucasvr@gobolinux.org>
# 14/06/2005
#

[ -z "$1" ] && target="./" || target="$1/"
	
mknod "$target"System/Kernel/Devices/audio       c 14   4
mknod "$target"System/Kernel/Devices/console     c  5   1
mknod "$target"System/Kernel/Devices/dsp         c 14   3
mknod "$target"System/Kernel/Devices/fb0         c 29   0
mknod "$target"System/Kernel/Devices/psaux       c 10   1
mknod "$target"System/Kernel/Devices/gpmctl      c 10  33
mknod "$target"System/Kernel/Devices/loop0       b  7   0
mknod "$target"System/Kernel/Devices/loop1       b  7   1
mknod "$target"System/Kernel/Devices/null        c  1   3
mknod "$target"System/Kernel/Devices/ram0        b  1   0
mknod "$target"System/Kernel/Devices/random      c  1   8
for i in `seq 0 12`; do
	mknod "$target"System/Kernel/Devices/tty$i c 4 $i
done
mknod "$target"System/Kernel/Devices/ttyS0       c  4  64
mknod "$target"System/Kernel/Devices/ttyS1       c  4  65
mknod "$target"System/Kernel/Devices/urandom     c  1   9
mknod "$target"System/Kernel/Devices/zero        c  1   5

mkdir "$target"System/Kernel/Devices/shm
mkdir "$target"System/Kernel/Devices/pts

ln -s /System/Kernel/Status/self/fd/0 "$target"System/Kernel/Devices/stdin
ln -s /System/Kernel/Status/self/fd/1 "$target"System/Kernel/Devices/stdout
ln -s /System/Kernel/Status/self/fd/2 "$target"System/Kernel/Devices/stderr
